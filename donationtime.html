<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Elder Care Home — Simple Homepage</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Maname&display=swap" rel="stylesheet">
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: 'Poppins', sans-serif; background-color: #f8fafc; }
  </style>
</head>
</head>
<body class="antialiased text-slate-800">
<!--nav bar-->
<header class="fixed top-0 w-full bg-[#FFE4E1] shadow z-50">
  <div class="max-w-6xl mx-auto px-6 py-4 flex justify-between items-center">
    <!-- Logo / Site Name -->
    <div class="flex items-center gap-4">
      <div class="w-12 h-6 rounded-full bg-amber-400 flex items-center justify-center text-white font-bold">EC</div>
      <h1 class="text-xl font-semibold">සහනෝදය වැඩිහිටි නිවාසය</h1>
    </div>

  <!-- Mobile menu button -->
    <button id="menu-btn" class="md:hidden focus:outline-none">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
              d="M4 6h16M4 12h16M4 18h16" />
      </svg>
    </button>

    <!-- Desktop Menu -->
    <nav class="space-x-6 text-1xl hidden md:flex">
      <a href="index.html" class="text-slate-700 hover:text-amber-600">Home</a>
      <a href="donationtime.html" class="text-slate-700 hover:text-amber-600">Donation Schedule</a>
      <a href="donate.html" class="text-slate-700 hover:text-amber-600">Donate</a>
      <a href="contact.html" class="text-slate-700 hover:text-amber-600">Contact</a>
    </nav>
  </div>

  <!-- Mobile Menu -->
  <nav id="mobile-menu" class="hidden bg-white text-white md:hidden flex flex-col space-y-3 px-6 py-4">
    <a href="index.html" class="text-slate-700 hover:text-amber-600">Home</a>
      <a href="donationtime.html" class="text-slate-700 hover:text-amber-600">Donation Schedule</a>
      <a href="donate.html" class="text-slate-700 hover:text-amber-600">Donate</a>
      <a href="contact.html" class="text-slate-700 hover:text-amber-600">Contact</a>
  </nav>
</header>

<!-- JS for toggle -->
<script>
  const menuBtn = document.getElementById("menu-btn");
  const mobileMenu = document.getElementById("mobile-menu");

  menuBtn.addEventListener("click", () => {
    mobileMenu.classList.toggle("hidden");
  });
</script>



  <!-- Google Fonts (add this in your <head>) -->
<link href="https://fonts.googleapis.com/css2?family=Maname&display=swap" rel="stylesheet">

<!-- Font Styles -->
<style>
  /* Sinhala font for Sinhala text */
  .sinhala-font {
    font-family: 'Noto Sans Sinhala', sans-serif;
  }

  /* English heading and paragraph styles */
  .hero-title { 
    font-family: 'Playfair Display', serif; 
    letter-spacing: 0.5px;
  }

  .hero-text { 
    font-family: 'Poppins', sans-serif; 
    font-weight: 300; 
  }
</style>

  <!-- Hero -->
  <section class="pt-24 pb-8">
    <div class="max-w-6xl mx-auto px-6 text-center">
      <h1 class="text-3xl md:text-4xl font-extrabold">Schedule Meal Donations</h1>
      <p class="mt-2 text-slate-600">Choose breakfast, lunch or dinner slots and see which times are still available.</p>
    </div>
  </section>

  <!-- Main content -->
  <main class="max-w-6xl mx-auto px-6 pb-16">
    <div class="grid md:grid-cols-2 gap-8">

      <!-- Scheduler card -->
      <section class="bg-white p-6 rounded-2xl shadow">
        <h2 class="text-xl font-semibold mb-4">Select Day & Meal Slots</h2>

        <label class="text-sm font-medium">Select day</label>
        <select id="mealDay" class="w-full p-3 mt-2 border rounded-lg">
          <option value="Monday">Monday</option>
          <option value="Tuesday">Tuesday</option>
          <option value="Wednesday">Wednesday</option>
          <option value="Thursday">Thursday</option>
          <option value="Friday">Friday</option>
          <option value="Saturday">Saturday</option>
        </select>

        <div class="mt-6 space-y-6">
          <!-- Breakfast -->
          <div>
            <div class="flex items-center justify-between">
              <div class="font-medium">Breakfast</div>
              <div class="text-sm text-slate-500">Choose slots</div>
            </div>
            <div id="breakfastSlots" class="mt-3 grid grid-cols-2 gap-2"></div>
          </div>

          <!-- Lunch -->
          <div>
            <div class="flex items-center justify-between">
              <div class="font-medium">Lunch</div>
              <div class="text-sm text-slate-500">Choose slots</div>
            </div>
            <div id="lunchSlots" class="mt-3 grid grid-cols-2 gap-2"></div>
          </div>

          <!-- Dinner -->
          <div>
            <div class="flex items-center justify-between">
              <div class="font-medium">Dinner</div>
              <div class="text-sm text-slate-500">Choose slots</div>
            </div>
            <div id="dinnerSlots" class="mt-3 grid grid-cols-2 gap-2"></div>
          </div>
        </div>

        <div class="mt-6 flex gap-3">
          <button id="scheduleMeal" class="px-4 py-2 bg-amber-600 text-white rounded-lg">Schedule Selected</button>
          <button id="clearSelections" class="px-4 py-2 border rounded-lg">Clear</button>
        </div>

        <p id="formMsg" class="mt-3 text-sm hidden"></p>
      </section>

      <!-- Summary card -->
      <aside class="bg-white p-6 rounded-2xl shadow">
        <h2 class="text-xl font-semibold mb-4">Summary</h2>

        <div>
          <h3 class="font-medium">Selected Meal Times</h3>
          <ul id="selectedList" class="mt-3 space-y-2 text-sm"></ul>
        </div>

        <div class="mt-6">
          <h3 class="font-medium">Available / Non-selected Times</h3>

          <div class="mt-3 space-y-4">
            <div>
              <div class="flex items-center justify-between">
                <div class="font-medium">Breakfast</div>
                <div id="breakfastCount" class="text-sm text-slate-500"></div>
              </div>
              <div id="availableBreakfast" class="mt-2 flex flex-wrap gap-2"></div>
            </div>

            <div>
              <div class="flex items-center justify-between">
                <div class="font-medium">Lunch</div>
                <div id="lunchCount" class="text-sm text-slate-500"></div>
              </div>
              <div id="availableLunch" class="mt-2 flex flex-wrap gap-2"></div>
            </div>

            <div>
              <div class="flex items-center justify-between">
                <div class="font-medium">Dinner</div>
                <div id="dinnerCount" class="text-sm text-slate-500"></div>
              </div>
              <div id="availableDinner" class="mt-2 flex flex-wrap gap-2"></div>
            </div>
          </div>
        </div>

      </aside>

    </div>

    <!-- Info / Legend -->
    <div class="mt-8 text-sm text-slate-600">
      <p><strong>Note:</strong> This demo stores scheduled slots locally in your browser. To use in production, send schedules to your server and re-check availability there.</p>
    </div>
  </main>

  <!-- Footer -->
  <footer class="bg-[#FFE4E1] text-black py-8">
    <div class="max-w-6xl mx-auto px-6 grid md:grid-cols-3 gap-6">
      <div>
        <h6 class="font-semibold">Sahanodaya Elder Care</h6>
        <p class="text-sm text-black mt-2">123 Hill View Road, Kandy • +94 71 123 4567</p>
      </div>
      <div>
        <h6 class="font-semibold">Quick links</h6>
        <ul class="mt-2 text-sm text-black space-y-2">
          <li><a href="#about">About</a></li>
          <li><a href="#donate">Donate</a></li>
          <li><a href="#locations">Locations</a></li>
        </ul>
      </div>
      <div>
        <h6 class="font-semibold">Get in touch</h6>
        <p class="text-sm text-black mt-2">Email: hello@sunrisecare.org</p>
        <p class="text-sm text-black mt-1">Facebook: /sunrisecare</p>
      </div>
    </div>
  </footer>

  <!-- Scheduler script -->
  <script>
    // ====== Configuration: timetable of slots ======
    const timetable = {
      Monday: {
        breakfast: ['08:00 - 08:30', '08:30 - 09:00'],
        lunch:     ['12:00 - 12:30', '12:30 - 13:00'],
        dinner:    ['18:00 - 18:30', '18:30 - 19:00']
      },
      Tuesday: {
        breakfast: ['08:00 - 08:30', '08:30 - 09:00'],
        lunch:     ['12:00 - 12:30'],
        dinner:    ['18:00 - 18:30']
      },
      Wednesday: {
        breakfast: ['08:00 - 08:30'],
        lunch:     ['12:00 - 12:30', '12:30 - 13:00'],
        dinner:    ['18:30 - 19:00']
      },
      Thursday: {
        breakfast: ['08:00 - 08:30', '08:30 - 09:00'],
        lunch:     ['12:00 - 12:30'],
        dinner:    ['18:00 - 18:30', '18:30 - 19:00']
      },
      Friday: {
        breakfast: ['08:00 - 08:30'],
        lunch:     ['12:00 - 12:30', '12:30 - 13:00'],
        dinner:    ['18:00 - 18:30']
      },
      Saturday: {
        breakfast: ['10:00 - 10:30'],
        lunch:     ['11:30 - 12:00'],
        dinner:    []
      }
    };

    // ====== Storage (demo: localStorage) ======
    const STORAGE_KEY = 'mealSchedules_demo';
    function loadSchedules() {
      try { return JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]'); }
      catch (e) { return []; }
    }
    function saveSchedules(arr) { localStorage.setItem(STORAGE_KEY, JSON.stringify(arr)); }

    // ====== DOM refs ======
    const dayEl = document.getElementById('mealDay');
    const breakfastSlotsEl = document.getElementById('breakfastSlots');
    const lunchSlotsEl = document.getElementById('lunchSlots');
    const dinnerSlotsEl = document.getElementById('dinnerSlots');
    const scheduleBtn = document.getElementById('scheduleMeal');
    const clearBtn = document.getElementById('clearSelections');
    const selectedList = document.getElementById('selectedList');
    const formMsg = document.getElementById('formMsg');

    const availBreakfastEl = document.getElementById('availableBreakfast');
    const availLunchEl = document.getElementById('availableLunch');
    const availDinnerEl = document.getElementById('availableDinner');
    const breakfastCount = document.getElementById('breakfastCount');
    const lunchCount = document.getElementById('lunchCount');
    const dinnerCount = document.getElementById('dinnerCount');

    // ====== Helpers ======
    function createCheckbox(name, value, label) {
      const id = `cb-${name}-${btoa(value).slice(0,8)}`;
      const wrapper = document.createElement('label');
      wrapper.className = 'inline-flex items-center gap-2 p-2 border rounded cursor-pointer hover:bg-gray-50';
      wrapper.innerHTML = `<input type="checkbox" id="${id}" value="${value}" data-meal="${name}" class="peer hidden">
                           <span class="text-sm">${label}</span>`;
      wrapper.addEventListener('click', (e) => {
        const cb = wrapper.querySelector('input[type=checkbox]');
        cb.checked = !cb.checked;
        wrapper.classList.toggle('bg-amber-50', cb.checked);
        e.preventDefault();
      });
      return wrapper;
    }

    function buildSlotPickers(day) {
      breakfastSlotsEl.innerHTML = '';
      lunchSlotsEl.innerHTML = '';
      dinnerSlotsEl.innerHTML = '';

      const daySlots = timetable[day] || { breakfast:[], lunch:[], dinner:[] };
      daySlots.breakfast.forEach(s => breakfastSlotsEl.appendChild(createCheckbox('breakfast', s, s)));
      daySlots.lunch.forEach(s => lunchSlotsEl.appendChild(createCheckbox('lunch', s, s)));
      daySlots.dinner.forEach(s => dinnerSlotsEl.appendChild(createCheckbox('dinner', s, s)));
    }

    function renderChips(container, items) {
      container.innerHTML = '';
      if (!items || items.length === 0) {
        container.innerHTML = '<span class="text-sm text-slate-500">No slots</span>';
        return;
      }
      items.forEach(t => {
        const chip = document.createElement('div');
        chip.className = 'px-3 py-1 text-sm bg-gray-100 rounded-full';
        chip.textContent = t;
        container.appendChild(chip);
      });
    }

    function capitalize(s) { return s[0].toUpperCase() + s.slice(1); }

    // ====== Summary update (selected & available) ======
    function updateSummary() {
      const day = dayEl.value;
      const allSlots = timetable[day] || { breakfast:[], lunch:[], dinner:[] };
      const saved = loadSchedules().filter(r => r.day === day);

      // Selected list
      selectedList.innerHTML = '';
      if (saved.length === 0) {
        selectedList.innerHTML = '<li class="text-sm text-slate-500">No scheduled meals for this day.</li>';
      } else {
        saved.forEach((r) => {
          const li = document.createElement('li');
          li.className = 'flex items-center justify-between p-2 border rounded';
          li.innerHTML = `<div><strong class="block">${capitalize(r.meal)}</strong><div class="text-sm text-slate-600">${r.time}</div></div>
                          <button data-id="${r.id}" class="ml-4 text-sm text-red-600">Cancel</button>`;
          selectedList.appendChild(li);
        });
      }

      // Available = all - saved
      function availableFor(meal) {
        const used = saved.filter(s => s.meal === meal).map(s => s.time);
        return (allSlots[meal] || []).filter(t => !used.includes(t));
      }

      const availB = availableFor('breakfast');
      const availL = availableFor('lunch');
      const availD = availableFor('dinner');

      renderChips(availBreakfastEl, availB);
      renderChips(availLunchEl, availL);
      renderChips(availDinnerEl, availD);

      breakfastCount.textContent = `${availB.length} available`;
      lunchCount.textContent = `${availL.length} available`;
      dinnerCount.textContent = `${availD.length} available`;

      // wire cancel buttons
      selectedList.querySelectorAll('button[data-id]').forEach(btn => {
        btn.addEventListener('click', () => {
          const id = btn.getAttribute('data-id');
          let arr = loadSchedules();
          arr = arr.filter(x => x.id !== id);
          saveSchedules(arr);
          updateSummary();
          buildSlotPickers(dayEl.value); // refresh pickers
        });
      });
    }

    // ====== Init ======
    buildSlotPickers(dayEl.value);
    updateSummary();

    dayEl.addEventListener('change', () => {
      buildSlotPickers(dayEl.value);
      updateSummary();
    });

    // Clear selections
    clearBtn.addEventListener('click', () => {
      document.querySelectorAll('#breakfastSlots input, #lunchSlots input, #dinnerSlots input').forEach(i => {
        i.checked = false; i.parentElement.classList.remove('bg-amber-50');
      });
      formMsg.classList.add('hidden');
    });

    // Schedule action
    scheduleBtn.addEventListener('click', () => {
      const day = dayEl.value;
      const checkedInputs = Array.from(document.querySelectorAll('#breakfastSlots input:checked, #lunchSlots input:checked, #dinnerSlots input:checked'));
      if (checkedInputs.length === 0) {
        formMsg.textContent = 'Please select at least one slot to schedule.';
        formMsg.className = 'mt-3 text-sm text-red-600';
        formMsg.classList.remove('hidden');
        return;
      }

      const arr = loadSchedules();
      checkedInputs.forEach(cb => {
        const meal = cb.dataset.meal; // breakfast|lunch|dinner
        const time = cb.value;
        // Avoid double-booking
        const exists = arr.some(r => r.day === day && r.meal === meal && r.time === time);
        if (!exists) {
          arr.unshift({ id: Math.random().toString(36).slice(2,9), day, meal, time, created: Date.now() });
        }
      });
      saveSchedules(arr);
      formMsg.textContent = 'Scheduled successfully.';
      formMsg.className = 'mt-3 text-sm text-emerald-600';
      formMsg.classList.remove('hidden');

      updateSummary();
      buildSlotPickers(dayEl.value);
      document.querySelectorAll('#breakfastSlots input, #lunchSlots input, #dinnerSlots input').forEach(i => {
        i.checked = false; i.parentElement.classList.remove('bg-amber-50');
      });
    });
  </script>
</body>
</html>
